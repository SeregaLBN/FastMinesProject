////////////////////////////////////////////////////////////////////////////////
//                               FastMines project
//                                                   (C) Sergey Krivulya (KSerg)
// file name: "TcTrSq.h"
//
// Описание класса TcTrSq - мозаика из 4х треугольников и 2х квадратов
////////////////////////////////////////////////////////////////////////////////

#ifndef FILE_TCTRSQ
#define FILE_TCTRSQ

#include ".\TcBase.h"

//////////////////////////////////
//  вид поля
//                 ###                              ###                              ####
//              ### # ####                       ### # ####                      #### #  ####
//           ###     #    ###                 ###     #    ###               ####      #     ####
//       ####        #       ###          ####        #       ###        ####          #         ####
//    ###            #          ####   ###            #          #### ###              #             ###
//  ##               #              ###               #              ##                 #             ##
//  #                 #             ##                 #             ##                 #            # #
//  #                 #            # #                 #            # ##                #           #   #
//   #                #           #   #                #           #   #                #          #    #
//   #                 #         #    #                 #         #    #                 #        #     #
//   #      0, 0       #  1, 0  # 2, 0#       3, 0      #  4, 0  # 5, 0#       6, 0      #  7, 0 # 8, 0 #
//   #                 #       #      #                 #       #      ##                #      #        #
//    #                 #     #        #                 #     #        #                 #    #         #
//    #                 #    #         #                 #    #         #                 #   #          #
//    #                 #   #          #                 #   #          #                 #  #           #
//    #                 #  #           #                 #  #           ##                 ##             #
//     #                 ##             #                 ##             #                ###             #
//     #               #####            #               #####            #            #### # ###          #
//     #           ####  #  ####        #           ####  #  ####        #         ###    #     ####      #
//     #       ####     #       ####    #       ####     #       ####    ##     ###       #         ###    #
//      #  ####         #           #### #  ####         #           #### # ####          #            ### #
//      ###             #               ####             #               ###              #               ##
//       #             ##                ##             #                 ##             #                 ##
//        #            #                #  #            #                #  #            #                #  #
//         #           #                #   #           #                #   #           #                #   #
//          #          #                #    #         #                 #    #         #                 #    #
//           #        ##                #     #        #                 #     #        #                 #     #
//            # 0, 1  #      1, 1      #  2, 1 #  3, 1 #     4, 1       #  5, 1 #  6, 1 #      7, 1      #  8, 1 #
//             #      #                #        #      #                #        #     #                 #        #
//              #    ##                #         #    #                 #         #    #                 #         #
//               #   #                 #          #   #                 #          #   #                 #          #
//                #  #                #            #  #                #            #  #                #            #
//                 ###                #             ##                 #             ##                 #             #
//                  ####              #             ####               #             ####               #             ##
//              #### # ####           #         ##### # ####           #         #### #  ####           #         ####
//           ###     #    #####      #       ####     #    #####      #      ####      #     ####      #      ####
//        ###         #       ####   #   #####         #       #####  #  ####          #         ####  #  ####
//    ####            #          #########             #          #######              #             #####
//  ##                #              #                 #             ##                 #             ##
//  #                 #             ##                 #             ##                 #            # #
//   #                 #           #  #                 #           # ##                #           #   #
//   #                 #          #   #                 #          #   #                #          #    #
//   #                 #         #    #                 #         #    #                 #        #     #
//    #                #        #      #                #        #     #                 #       #      #
//    #     0, 2        # 1, 2 #  2, 2 #      3, 2       # 4, 2 # 5, 2 ##      6, 2      #  7, 2#  8, 2  #
//    #                 #     #        #                 #     #        #                 #    #         #
//    #                 #    #         #                 #    #         #                 #   #          #
//     #                #   #           #                #   #          #                 #  #           #
//     #                 # #            #                 # #           ##                 ##             #
//     #                 ##             #                 ##             #                ###             #
//      #               ####             #               ####            #            #### # ###          #
//      #           #### #  ####         #           #### #  ####        #         ###    ##    ####      #
//      #       ####    #       ####     #       ####    #       ####    ##     ###       #         ###    #
//       #  ####        #           ####  #  ####        #           #### # ####          #            ### #
//       ###            #               #####            #               ###              #               ##
//        #             #                 ##             #                ##              #                ##
//         #           #                 #  #           #                #  #            #                #  #
//          #          #                 #   #          #                #   #           #                #   #
//           #         #                 #    #         #                #    #          #                #    #
//            #        #                #      #        #                #     #        #                 #     #
//             # 0, 3 #       1, 3      #  2, 3 #  3, 3#      4, 3      #  5, 3 ## 6, 3 #      7, 3      #  8,3  #
//              #     #                 #        #     #                #         #     #                #        #
//               #    #                #          #    #                #          #    #                #         #
//                #   #                #           #   #                #           #  #                 #          #
//                 # #                 #            # #                #             # #                #            #
//                  ##                 #             ##                #              ##                #             #
//                  ####              #             #####              #              ####              #             ##
//               ### #  ####          #           ### #  ####          #          #### #  ####          #         ####
//            ###     #     ###       #       ####     #     ####     #       ####     #      ####     #      ####
//        ####        #        ####  #    ####         #         ###  #   ####          #         #### #  ####
//     ###            #            #######             #            ######              #             ####
//   ##               #               #                #              #                 #             ##
//   #                 #             ##                 #             ##                #            #  #
//   #                 #            # #                 #            # #                 #          #   #
//    #                #           #   #                #           #   #                #         #    #
//    #                 #         #    #                 #         #    #                #        #     #
//    #                 #        #     #                 #        #     #                #       #       #
//    #     0, 4        #  1, 4 # 2, 4 #      3, 4       #  4, 4 #  5, 4#      6, 4       # 7, 4#   5, 4 #
//     #                 #     #        #                 #     #        #                #    #         #
//     #                 #    #         #                 #    #         #                #   #           #
//     #                 #   #          #                 #   #          #                #  #            #
//     #                 #  #           #                 #  #           ##                ##             #
//      #                 ##             #                 ##             #               ###              #
//      #               #####            #               #####            #            ### # ####          #
//      #           ####  #  ####        #           ####  #  ####        #         ###    #     ###       #
//      #       ####     #       ####    #       ####     #       ####    ##    ####      #         ###    #
//       #  ####         #           #### #  ####         #           #### # ###          #            #### #
//       ###             #               ####             #               ###             #                ##
//        #             #                 ##             #                 ##             #                 ##
//         #            #                 # #            #                 # #           #                 #  #
//          #           #                #   #           #                #   #          #                 #   #
//           #         #                 #    #         #                 #    #         #                 #    #
//            #        #                 #     #        #                 #     #        #                #      #
//             #  0, 5 #      1, 5       # 2, 5 #  3, 5 #      4, 5       # 5, 5 #  6, 5#      8, 5       # 7, 5  #
//              #      #                #        #      #                #        #     #                 #        #
//               #    #                 #         #    #                 #         #    #                #          #
//                #   #                 #          #   #                 #          #   #                #           #
//                 #  #                 #           #  #                 #           # #                 #            #
//                  ##                 #             ##                 #             ##                 #             #
//                   ##                #             ###                #             ####              #             ###
//                     ####            #          ###   ####            #          ###    ####          #         ####
//                         ###         #       ###          ###         #       ###           ####      #     ####
//                            ###     #    ####                ###     #    ####                  #### #  ####
//                               #### # ###                       #### # ###                          ####
//                                   ###                              ###
//////////////////////////////////
//
// POINT regionOut[4]
//
//     this->direction == 0             this->direction == 4
//                       0                  3
//                       #                  #
//                    ### #                # ####
//               #####    #                #     #####
//          #####         #               #           #####
//      ####               #              #                ###
// 3 ##                    #             #                     # 0
//    #                     #            #                     #
//    #                     #            #                    #
//     #                     #          #                     #
//      #                     #         #                    #
//      #                     #        #                     #
//      #                      #      #                     #
//       #                     # 1  2 ##                    #
//       #                 ###          ####               #
//        #          ######                 ####           #
//        #      ####                           ######    #
//         # ####                                     ### #
//          #                                            #
//         2                                             1 
//
// this->direction == 2     this->direction == 1
//                 0        2                          
//                 #        ##
//                ##        # ####
//              #   #       #     ######
//            #     #        #          ###
//          #        #       #             ###
//         #         #       #                ## 0
//       #            #       #              #
//     #              #       #            #
// 2 ##                #       #        #
//     ####            #        #     #
//         ########    #        #   #
//                 #### #        ##
//                     ##        #
//                      1        1
//
// this->direction == 5   this->direction == 3
//        0                                    0
//        #                                   ##
//       #  #                             #### #
//       #    #                      #####    #
//      #       #              #####          #
//      #        #        2 ##                #
//      #          #          #              #
//     #             #          #            #
//     #               #         #          #
//    #                ## 1        #        #
//    #         ######              #       #
//    #    #####                      #    #
//   # ####                             #  #
//   ##                                   #
//   2                                    1
//////////////////////////////////
//
//    POINT neighbor[12]
//
//             this->direction == 0                     this->direction == 4
//
//      ##                   ####                       ####                    ##
//      # ####           #### #  ####               #### #  ####            #### #
//     #      ####   ####    #       ####       ####      #     ####    ####      #
//     #          ###    2   #     3     ##   ##    0     #    1    ####          #
//     #     0     ##        #            #   #           #         ##       3    #
//     #          #  #  x,   #           #     #          #  x,    #  #           #
//    #           #   # y-1 #    x+1,    #     #   x-1,    # y-1  #   #            #
//    #   x-2,    # 1  #    #    y-1     #     #   y-1     #    ##  2 #    x+2,    #
//    #   y-1     #     #   #           #      #           #   #      #    y-1     #
//    #          #       #  #           #       #          #  #  x+1,  #           #
//   #           # x-1,   ##           #        #           ##   y-1   #            #
//   ##          # y-1    ###          #        #          ####        #           ##
//   # ####      #    #### # ####      #        #      #### #  ####    #       #### #
//    #    #### # ####      #    #### #          # ####    #       #### #  ####    #
//    #   4    ###          #   6    ##          ##    5   #           ####   7    #
//    #        ##    this   #        ##          ##        #   this     ##         #
//    #  x-2, #  #          #  x+1, #  #        #  #  x-1, #           #  #   x+2, #
//     # y   # 5 #           # y   #   #        #   # y   #            #   #  y   #
//     #   ##    #    X, Y   #    #  7 #        # 4  #    #    X, Y    # 6  #     #
//     #  #  x-1,#           #   #      #       #    #    #            #     #    #
//     # #   y    #          #  #  x+2, #      # x-2, #   #           #  x+1, #   #
//      #         #           ##   y     #     # y     # #            #  y     # #
//      # ###     #          #####       #     #        ##            #         ##
//     #     ##   #      ######  ####    #     #        ####          #         ##
//     #       ### # ####    #       ###  #   #     #### #  ####     #      #### #
//     #    8     ###   10   #     11   ###   # ####      #     #### #  ####      #
//     #           ##        #           #    ##          #    9    ####          #
//    #           #  #  x,  #           #     #     8     #         ##     11     #
//    #   x-2,    #   # y+1 #   x+1,    #      #          #  x,    #  #           #
//    #   y+1     # 9  #    #   y+1     #      #   x-1,    # y+1  #   #            #
//    #           #     #   #           #      #   y+1     #    ## 10 #    x+2,    #
//   #           #  x-1, # #           #       #           #   #      #    y+1     #
//   #           #  y+1   ##           #        #          #  #   x+1, #           #
//   ##          #        ###          #        #           ##    y+1  #            #
//     ####      #    ####   ####      #        #          ####        #           ##
//         #### # ####           #### #         #      ####    ####    #       ####
//             ###                   ##          # ####            #### #  ####
//                                               ##                    ####
//
//            this->direction == 1                      this->direction == 2
//
//                 ###                                        ##
//             #### # ####                                    # ####
//         ####    #      ####                               #      ####
//       ##    1   #    2     ##                             #    0     ##
//       ##        #           ##                            #           ##
//      #  #       #          #  #                           #          #  #
//      # 0 #     #           # 3 #                         #           # 1 #
//      #    #    #           #    #                        #           #    #
//      #     #   #           #     #                       #           #     #
//     #       #  #          #       #                      #          #       #
//     #        ##           #        #                    #           #        #
//     #        ###          #        ##                  ###          #         #
//     #    #### # ####      #    #### #               ### # ##        #         ##
//    # ####      #    #### # ####      #           ###    #   ###    #      #### #
//    ##    4     #  this  ###    6     #        ###        #   3 ### #  ####      #
//    #           #        ##           #      ##     2     #        ####    4     #
//     #          #       #  #           #     #            #        ##            #
//     #           #     # 5 #           #      #           #       #  #           #
//     #           #    #    #            #     #            #     #   #            #
//     #           #   #     #            #     #            #    #    #            #
//      #          #  #       #           #     #            #   #this #           #
//      #           ##        #                  #           #  #       #           #
//      #          ###        #           #      #            ##        #            #
//      #      #### # ####    #       ####       #           ###        #           ##
//       # ####    #      #### #  ####           #       #### # ####    #       #### #
//       ##    7   #    8     ####                #  ####    #      #### #  ####    #
//        #        #           #                  ###   5    #     6    ####   8    #
//         #       #          #                    #         #           ##         #
//          #     #           #                     #        #          #  #        #
//           #    #           #                      #      #           # 7 #      #
//            #   #           #                       #     #           #    #     #
//             #  #          #                         #    #           #     #    #
//              ##           #                          #   #          #       #   #
//               ##          #                           # #           #        # #
//                 ####      #                            ##           #         ##
//                     #### #                              ##          #         ##
//                         ##                                ####     #      ####
//                                                               #### #  ####
//                                                                   ####
//
//              this->direction == 3                  this->direction == 5
//
//                         ####                                     ##              
//                      ### #  ####                             #### #              
//                  ####     #     ####                     ####     #              
//                ##    1    #    2    ##                 ##    1     #             
//               ##          #         ##                ##           #             
//              #  #         #        #  #              #  #          #             
//             # 0 #          #      # 3 #             # 0 #          #             
//           ##    #          #    ##    #            #    #           #            
//          #      #          #   #      #            #     #          #            
//         #        #         #  #        #          #      #          #            
//        #         #          ##         #         #       #          #            
//       ###        #         ####        #        #         #          #           
//       #  ####    #      ### #  ####    #       ###        #         ####         
//      #       #### # ####   #       #### #      #  ####    #      ### #  ####     
//      #     4     ###  this #     6     ##     #       #### # ####   #       #### 
//      #            ##       #            #     #    2      ###    3  #     4     #
//      #           #  #      #           #      #            ##       #           #
//     #            # 5 #    #            #     #            #  #     #            #
//     #            #   #    #            #     #            #   #    #            #
//     #            #    #   #            #     #           # this#   #            #
//     #           #      #  #           #      #           #      #  #           # 
//    #            #       ##            #     #            #       ##            # 
//    ###          #       ####          #     ##          #        ####          # 
//       ####      #    ### #  ####      #     # ####      #    #### #  ####      # 
//           #### # ####     #     #### #      #     #### # ####     #      #### #  
//               ###   7     #    8    ##       #   5    ###     7    #    8    ##  
//                #          #         #        #        ##           #         #   
//                 #         #        #         #       #  #          #        #    
//                 #          #      #          #      # 6 #          #       #     
//                 #          #    ##            #    #    #           #     #      
//                 #          #   #              #    #     #          #    #       
//                  #         #  #               #   #      #          #   #        
//                  #          ##                #  #       #          #  #         
//                  #         ##                  ##         #          ##          
//                  #      ###                    ###        #         ##           
//                   # ####                          ####    #      ###             
//                   ##                                  #### # ####                
//                                                           ###                    
//////////////////////////////////

namespace nsFigure {

class TcTrSq: public TB{
private:
   static float n;
   static float m;
   static float b;
   static float k;
public:
   static POINT GetSizeFieldInPixel(const POINT&, const int&);
   static int SizeInscribedSquare(int);
   static float GetPercentMine(TeSkillLevel); // процент мин на заданном уровне сложности
private:
   POINT neighbor[12]; // кординаты соседей; если соседа нет, то координаты отрицательны
   POINTFLOAT regionOut[4]; // координаты 4x точек из которых состоит фигура
   int direction;
public:
   TcTrSq(const POINT&, const POINT&, const int&);
   int   GetNeighborNumber() const;
   POINT GetNeighborCoord(int) const;
   bool ToBelong(int, int); // принадлежат ли эти экранные координаты ячейке
   void SetPoint(const int&); // определить координаты точек из которых состоит фигура
   void Paint() const;
};

} // namespace nsFigure

#endif // FILE_TCTRSQ
